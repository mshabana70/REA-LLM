HELLO
HELLO2
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
There was a problem when trying to write in your cache folder (/data). You should set the environment variable TRANSFORMERS_CACHE to a writable directory.
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Traceback (most recent call last):

  File "/opt/conda/bin/text-generation-server", line 8, in <module>
    sys.exit(app())

  File "/opt/conda/lib/python3.9/site-packages/text_generation_server/cli.py", line 128, in download_weights
    adapter_config_filename = hf_hub_download(

  File "/opt/conda/lib/python3.9/site-packages/huggingface_hub/utils/_validators.py", line 118, in _inner_fn
    return fn(*args, **kwargs)

  File "/opt/conda/lib/python3.9/site-packages/huggingface_hub/file_download.py", line 1159, in hf_hub_download
    os.makedirs(storage_folder, exist_ok=True)

  File "/opt/conda/lib/python3.9/os.py", line 215, in makedirs
    makedirs(head, exist_ok=exist_ok)

  File "/opt/conda/lib/python3.9/os.py", line 225, in makedirs
    mkdir(name, mode)

OSError: [Errno 30] Read-only file system: '/data'

Server is not up yet; status=000
[2m2023-11-18T21:09:10.510690Z[0m [32m INFO[0m [2mtext_generation_launcher[0m[2m:[0m Args { model_id: "codellama/CodeLlama-7b-Instruct-hf", revision: None, validation_workers: 2, sharded: None, num_shard: None, quantize: None, dtype: None, trust_remote_code: false, max_concurrent_requests: 128, max_best_of: 2, max_stop_sequences: 4, max_top_n_tokens: 5, max_input_length: 4000, max_total_tokens: 6000, waiting_served_ratio: 1.2, max_batch_prefill_tokens: 4096, max_batch_total_tokens: None, max_waiting_tokens: 20, hostname: "0.0.0.0", port: 8000, shard_uds_path: "/tmp/text-generation-server", master_addr: "localhost", master_port: 29500, huggingface_hub_cache: Some("/scratch/ms9761/rea-llm/data"), weights_cache_override: None, disable_custom_kernels: true, cuda_memory_fraction: 1.0, rope_scaling: None, rope_factor: None, json_output: false, otlp_endpoint: None, cors_allow_origin: [], watermark_gamma: None, watermark_delta: None, ngrok: false, ngrok_authtoken: None, ngrok_edge: None, env: false }
[2m2023-11-18T21:09:10.510787Z[0m [32m INFO[0m [1mdownload[0m: [2mtext_generation_launcher[0m[2m:[0m Starting download process.
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
[2m2023-11-18T21:09:18.133543Z[0m [32m INFO[0m [2mtext_generation_launcher[0m[2m:[0m Files are already present on the host. Skipping download.

Server is not up yet; status=000
[2m2023-11-18T21:09:18.921167Z[0m [32m INFO[0m [1mdownload[0m: [2mtext_generation_launcher[0m[2m:[0m Successfully downloaded weights.
[2m2023-11-18T21:09:18.921415Z[0m [32m INFO[0m [1mshard-manager[0m: [2mtext_generation_launcher[0m[2m:[0m Starting shard [2m[3mrank[0m[2m=[0m0[0m
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
[2m2023-11-18T21:09:21.879552Z[0m [33m WARN[0m [2mtext_generation_launcher[0m[2m:[0m We're not using custom kernels.

[2m2023-11-18T21:09:22.021545Z[0m [33m WARN[0m [2mtext_generation_launcher[0m[2m:[0m Unable to use Flash Attention V2: GPU with CUDA capability 7 5 is not supported for Flash Attention V2

[2m2023-11-18T21:09:22.046054Z[0m [33m WARN[0m [2mtext_generation_launcher[0m[2m:[0m Could not import Mistral model: Mistral model requires flash attn v2

Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
[2m2023-11-18T21:09:28.985609Z[0m [32m INFO[0m [1mshard-manager[0m: [2mtext_generation_launcher[0m[2m:[0m Waiting for shard to be ready... [2m[3mrank[0m[2m=[0m0[0m
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
[2m2023-11-18T21:09:39.052677Z[0m [32m INFO[0m [1mshard-manager[0m: [2mtext_generation_launcher[0m[2m:[0m Waiting for shard to be ready... [2m[3mrank[0m[2m=[0m0[0m
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
[2m2023-11-18T21:09:49.128532Z[0m [32m INFO[0m [1mshard-manager[0m: [2mtext_generation_launcher[0m[2m:[0m Waiting for shard to be ready... [2m[3mrank[0m[2m=[0m0[0m
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
[2m2023-11-18T21:09:59.137687Z[0m [32m INFO[0m [1mshard-manager[0m: [2mtext_generation_launcher[0m[2m:[0m Waiting for shard to be ready... [2m[3mrank[0m[2m=[0m0[0m
Server is not up yet; status=000
Server is not up yet; status=000
[2m2023-11-18T21:10:00.921543Z[0m [32m INFO[0m [2mtext_generation_launcher[0m[2m:[0m Server started at unix:///tmp/text-generation-server-0

[2m2023-11-18T21:10:00.956799Z[0m [32m INFO[0m [1mshard-manager[0m: [2mtext_generation_launcher[0m[2m:[0m Shard ready in 42.026592509s [2m[3mrank[0m[2m=[0m0[0m
[2m2023-11-18T21:10:01.029689Z[0m [32m INFO[0m [2mtext_generation_launcher[0m[2m:[0m Starting Webserver
[2m2023-11-18T21:10:01.367388Z[0m [33m WARN[0m [2mtext_generation_router[0m[2m:[0m [2mrouter/src/main.rs[0m[2m:[0m[2m349:[0m `--revision` is not set
[2m2023-11-18T21:10:01.367407Z[0m [33m WARN[0m [2mtext_generation_router[0m[2m:[0m [2mrouter/src/main.rs[0m[2m:[0m[2m350:[0m We strongly advise to set it to a known supported commit.
[2m2023-11-18T21:10:01.419318Z[0m [32m INFO[0m [2mtext_generation_router[0m[2m:[0m [2mrouter/src/main.rs[0m[2m:[0m[2m371:[0m Serving revision 65515fcea0bf53f04b79ac582d93da752cf1e655 of model codellama/CodeLlama-7b-Instruct-hf
[2m2023-11-18T21:10:01.424464Z[0m [32m INFO[0m [2mtext_generation_router[0m[2m:[0m [2mrouter/src/main.rs[0m[2m:[0m[2m213:[0m Warming up model
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
Server is not up yet; status=000
[2m2023-11-18T21:10:06.537897Z[0m [32m INFO[0m [2mtext_generation_router[0m[2m:[0m [2mrouter/src/main.rs[0m[2m:[0m[2m246:[0m Setting max batch total tokens to 62464
[2m2023-11-18T21:10:06.537910Z[0m [32m INFO[0m [2mtext_generation_router[0m[2m:[0m [2mrouter/src/main.rs[0m[2m:[0m[2m247:[0m Connected
Server is up!
HELLO FROM PYTHON
[2m2023-11-18T21:10:21.794000Z[0m [32m INFO[0m [1mgenerate[0m[1m{[0m[3mparameters[0m[2m=[0mGenerateParameters { best_of: None, temperature: None, repetition_penalty: None, top_k: None, top_p: None, typical_p: None, do_sample: false, max_new_tokens: Some(2000), return_full_text: None, stop: [], truncate: None, watermark: false, details: false, decoder_input_details: false, seed: None, top_n_tokens: None } [3mtotal_time[0m[2m=[0m"8.84037681s" [3mvalidation_time[0m[2m=[0m"1.70254ms" [3mqueue_time[0m[2m=[0m"43.986Âµs" [3minference_time[0m[2m=[0m"8.838630512s" [3mtime_per_token[0m[2m=[0m"33.103484ms" [3mseed[0m[2m=[0m"None"[1m}[0m[2m:[0m [2mtext_generation_router::server[0m[2m:[0m [2mrouter/src/server.rs[0m[2m:[0m[2m289:[0m Success
[2m2023-11-18T21:10:27.829145Z[0m [32m INFO[0m [1mgenerate[0m[1m{[0m[3mparameters[0m[2m=[0mGenerateParameters { best_of: None, temperature: None, repetition_penalty: None, top_k: None, top_p: None, typical_p: None, do_sample: false, max_new_tokens: Some(2000), return_full_text: None, stop: [], truncate: None, watermark: false, details: false, decoder_input_details: false, seed: None, top_n_tokens: None } [3mtotal_time[0m[2m=[0m"6.032392587s" [3mvalidation_time[0m[2m=[0m"1.651453ms" [3mqueue_time[0m[2m=[0m"25.897Âµs" [3minference_time[0m[2m=[0m"6.030715495s" [3mtime_per_token[0m[2m=[0m"33.135798ms" [3mseed[0m[2m=[0m"None"[1m}[0m[2m:[0m [2mtext_generation_router::server[0m[2m:[0m [2mrouter/src/server.rs[0m[2m:[0m[2m289:[0m Success
running python request script
